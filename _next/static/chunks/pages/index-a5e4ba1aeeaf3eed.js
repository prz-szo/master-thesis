(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3257)}])},3257:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return G}});var r,a,i=n(5893),s=n(9008),l=n.n(s),o=n(5229),c=n(5731),u=n(5697),d=n.n(u),f=n(7294),x=function(t){var e=t.productId,n=t.quantity,r=(0,f.useRef)(null),a=(0,f.useCallback)(function(){r.current.dispatchEvent(new CustomEvent("cart:item_added",{bubbles:!0,detail:{productId:Number(e),quantity:Number(null!=n?n:1)}}))},[e,n]);return(0,i.jsx)(o.x,{children:(0,i.jsx)("div",{className:"w-full",ref:r,children:(0,i.jsx)(c.z,{colorScheme:"teal",size:"lg",width:"100%",onClick:a,children:"Add to Cart"})})})};x.propTypes={productId:d().number.isRequired,quantity:d().number};var m=n(1799),h=n(7350),p=n(1729),j=n(5972),v=n(8954),b=n(9697),g=n(4504),y=n(5819),w=n(3793),N=n(7018),C=n(9396),_=function(t){return(0,i.jsx)("svg",(0,C.Z)((0,m.Z)({viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{children:(0,i.jsx)("path",{d:"M24.61 7.184L36.983 19.56c.188.188.321.39.4.61.077.218.116.453.116.703 0 .25-.039.484-.116.703a1.656 1.656 0 01-.4.61L24.61 34.558c-.343.344-.773.524-1.288.54a1.75 1.75 0 01-1.337-.54 1.755 1.755 0 01-.587-1.288 1.75 1.75 0 01.54-1.337l9.188-9.187H10.172c-.531 0-.977-.18-1.337-.538-.359-.36-.538-.806-.538-1.337 0-.532.18-.977.538-1.335.36-.36.806-.54 1.337-.54h20.953l-9.188-9.188c-.343-.344-.523-.781-.54-1.312-.014-.532.166-.97.54-1.313.344-.375.782-.562 1.313-.562.531 0 .984.187 1.36.562z"})}))},k=function(t){return(0,i.jsx)("svg",(0,C.Z)((0,m.Z)({viewBox:"0 0 41 42",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{children:(0,i.jsx)("path",{d:"M4.667 27.667v-23H.833V.833h5.75A1.917 1.917 0 018.5 2.75v23h23.84l3.833-15.333h-23.84V6.583H38.63a1.917 1.917 0 011.86 2.383l-4.793 19.167a1.917 1.917 0 01-1.859 1.45H6.583a1.917 1.917 0 01-1.916-1.916zM8.5 41.083a3.833 3.833 0 110-7.666 3.833 3.833 0 010 7.666zm23 0a3.834 3.834 0 110-7.667 3.834 3.834 0 010 7.667z"})}))},q=function(t){return(0,i.jsx)("svg",(0,C.Z)((0,m.Z)({viewBox:"0 0 27 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.187 7.247a1.016 1.016 0 00.001-1.433 1.013 1.013 0 00-1.433-.001l-6.112 6.112-6.11-6.112a1.014 1.014 0 10-1.435 1.434l6.112 6.11-6.112 6.11a1.015 1.015 0 001.434 1.435l6.11-6.112 6.113 6.112a1.013 1.013 0 101.432-1.435l-6.112-6.11 6.112-6.11z"})}))},Z=n(7568),P=n(828),T=n(6305),E=n(655),F=n(5945),Q=n(6492),z=n(4846),D=n(5678),I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.pow(10,e);return Math.ceil(t*n)/n},M=function(t){t.total=t.quantity*t.price;var e=1-.01*t.discountPercentage;t.discountedPrice=I(t.total*e)},S=function(t){t.total=t.products.reduce(function(t,e){return t+e.total},0),t.discountedTotal=I(t.products.reduce(function(t,e){return t+e.discountedPrice},0)),t.totalProducts=t.products.length,t.totalQuantity=I(t.products.reduce(function(t,e){return t+e.quantity},0))},A=function(){var t,e,n,r=(0,F.NL)(),a=(0,P.Z)((0,D._)("cart",{id:1,userId:Math.floor(20*Math.random())+1,total:0,discountedTotal:0,totalProducts:0,totalQuantity:0,products:[]}),2),i=a[0],s=a[1],l=(0,f.useCallback)(function(t){r.setQueryData(["cart"],(0,m.Z)({},t)),s(t)},[s,r]),o=(0,Q.a)({queryKey:["cart"],notifyOnChangeProps:["data"],queryFn:function(){var t=r.getQueryData(["cart"]);return!i||t&&t.products.length?t:i},staleTime:1/0}).data,c=(0,z.D)({mutationFn:(t=(0,Z.Z)(function(t){var e,n,r,a,i;return(0,E.__generator)(this,function(s){return e=t.newProduct,n=t.quantity,o&&((r=o.products.find(function(t){return t.id===e.id}))?(r.quantity+=n,M(r)):(a=1-e.discountPercentage/100,i=(0,C.Z)((0,m.Z)({},e),{quantity:n,total:e.price*n,discountedPrice:I(e.price*n*a)}),o.products.push(i)),S(o),l(o)),[2]})}),function(e){return t.apply(this,arguments)}),onSuccess:function(){return r.invalidateQueries(["cart"])}}).mutate,u=(0,z.D)({mutationFn:(e=(0,Z.Z)(function(t){var e,n,r;return(0,E.__generator)(this,function(a){return e=t.productId,n=t.quantity,o&&(r=o.products.find(function(t){return t.id===e}))&&(0===n?o.products=o.products.filter(function(t){return t.id!==e}):(r.quantity=n,M(r)),S(o),l(o)),[2]})}),function(t){return e.apply(this,arguments)}),onSuccess:function(){return r.invalidateQueries(["cart"])}}).mutate,d=(0,z.D)({mutationFn:(n=(0,Z.Z)(function(t){return(0,E.__generator)(this,function(e){return o&&o.products.map(function(t){return t.id}).includes(t)&&(o.products=(0,T.Z)(o.products.filter(function(e){return e.id!==t})),S(o),l(o)),[2]})}),function(t){return n.apply(this,arguments)}),onSuccess:function(){return r.invalidateQueries(["cart"])}}).mutate,x=(0,z.D)({mutationFn:(0,Z.Z)(function(){return(0,E.__generator)(this,function(t){return o&&(o.products.length=0,S(o),l(o)),[2]})}),onSuccess:function(){return r.invalidateQueries(["cart"])}}).mutate;return(0,f.useMemo)(function(){return{cart:o,addToCart:c,updateProductQuantity:u,removeFromCart:d,clearCart:x}},[c,o,x,d,u])},O=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},W="https://dummyjson.com",L={get:(r=(0,Z.Z)(function(t){var e,n;return(0,E.__generator)(this,function(r){switch(r.label){case 0:return e=t.url,[4,fetch("".concat(W).concat(e),{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:if(!(n=r.sent()).ok)return[2,[null,Error("Api GET request error: ".concat(n.status," ").concat(n.statusText))]];return[4,n.json()];case 2:return[2,[r.sent(),null]]}})}),function(t){return r.apply(this,arguments)}),mutate:(a=(0,Z.Z)(function(t){var e,n,r,a;return(0,E.__generator)(this,function(i){switch(i.label){case 0:return e=t.url,n=t.body,r=t.method,[4,fetch("".concat(W).concat(e),{method:r,body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})];case 1:if(!(a=i.sent()).ok)return[2,[null,Error("Api ".concat(r," request error: ").concat(a.status," ").concat(a.statusText))]];return[4,a.json()];case 2:return[2,[i.sent(),null]]}})}),function(t){return a.apply(this,arguments)})},B=function(t){var e=t.children,n=t.onClick;return(0,i.jsx)("button",{onClick:n,className:"outline-amber rounded-sm bg-transparent px-3 py-1 text-amber-400 outline outline-2 transition-all duration-300 hover:bg-amber-400/20",children:e})},H=function(t){var e=t.children,n=t.onClick;return(0,i.jsxs)("button",{onClick:n,className:"group flex items-center gap-2 rounded-lg bg-amber-400 py-2 px-6 text-xl font-bold text-neutral-800 transition-all duration-300 hover:bg-neutral-800 hover:text-amber-500 md:text-2xl",children:[e,(0,i.jsx)("div",{className:"w-7",children:(0,i.jsx)(_,{className:"fill-neutral-800 transition-all duration-300 group-hover:fill-amber-500"})})]})},R=n(9571),Y=function(t){var e=t.quantity,n=t.title,r=t.price,a=t.discountedPrice,s=t.discountPercentage,l=t.thumbnail,o=t.id,c=A(),u=c.updateProductQuantity,d=c.removeFromCart;return(0,i.jsxs)("div",{className:"flex min-h-[8rem] w-full items-center justify-between gap-6 rounded-lg p-4 shadow-md",children:[(0,i.jsx)("div",{className:"relative h-24 w-24 flex-none",children:(0,i.jsx)("img",{sizes:"(min-width: 768px) 15rem, 100vw",src:null!=l?l:"https://i.dummyjson.com/data/products/".concat(o,"/thumbnail.jpg"),className:"absolute left-0 top-0 right-0 bottom-0 h-full w-full rounded-lg border border-neutral-400/50 object-cover",alt:n})}),(0,i.jsxs)("div",{className:"flex flex-1 flex-col gap-1 text-center",children:[(0,i.jsx)("h6",{className:"flex-1 text-center text-lg font-medium",children:n}),(0,i.jsxs)("div",{className:"text-sm",children:["Price per unit:"," ",(0,i.jsx)("span",{className:"font-medium",children:O(r-r*s*.01)})]})]}),(0,i.jsxs)("div",{className:"flex flex-none items-center gap-6",children:[(0,i.jsxs)("div",{className:"flex flex-none items-center gap-2",children:[(0,i.jsxs)(R.Y2,{maxWidth:"20",defaultValue:e,min:0,max:10,onChange:function(t,e){return u({productId:o,quantity:e})},children:[(0,i.jsx)(R.zu,{}),(0,i.jsxs)(R.Fi,{children:[(0,i.jsx)(R.WQ,{}),(0,i.jsx)(R.Y_,{})]})]}),(0,i.jsx)("div",{className:"flex flex-col gap-1 text-center",children:(0,i.jsx)("p",{className:"text-xl",children:O(a)})})]}),(0,i.jsx)("button",{onClick:function(){return d(o)},className:"flex h-7 w-7 flex-none rounded-sm bg-slate-400 transition-all duration-300 hover:bg-amber-500",children:(0,i.jsx)(q,{className:"fill-slate-50 transition-all duration-300"})})]})]})},V=function(){var t,e,n=(0,h.p)(),r=(0,p.q)(),a=r.isOpen,s=r.onToggle,l=r.onClose,o=A(),c=o.cart,u=o.clearCart,d=o.addToCart,x=(0,f.useCallback)(function(){u()},[u]),C=(0,f.useCallback)(function(t){t.detail.productId&&L.get({url:"/products/".concat(t.detail.productId)}).then(function(t){return t[0]}).then(function(e){var n;e&&d({newProduct:e,quantity:null!==(n=t.detail.quantity)&&void 0!==n?n:1})})},[d]);return(0,f.useEffect)(function(){return window.addEventListener("cart:item_added",C),function(){window.removeEventListener("cart:item_added",C)}},[C]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"relative h-7 w-7",children:[(0,i.jsx)("button",{disabled:!c,onClick:s,children:(0,i.jsx)("div",{className:"h-7 w-7",children:(0,i.jsx)(k,{className:"fill-amber-500 transition-all duration-300 hover:fill-amber-400"})})}),(0,i.jsx)("span",{className:"items absolute -bottom-2 -right-3 box-content flex h-5 w-5 items-center justify-center rounded-full border-2 border-amber-500 bg-slate-50 text-slate-900",children:(0,i.jsx)("span",{className:"text-xs transition-all duration-300",children:null!==(t=null==c?void 0:c.totalQuantity)&&void 0!==t?t:0})})]}),(0,i.jsxs)(j.d,{isOpen:a,placement:"right",size:"lg",onClose:l,children:[(0,i.jsx)(v.Z,{}),(0,i.jsxs)(b.s,{children:[(0,i.jsx)(g.x,{fontSize:"xx-large",children:"Your shopping cart"}),(0,i.jsx)(y.o,{}),(0,i.jsx)(w.f,{children:(0,i.jsxs)("div",{className:"flex h-full flex-col gap-6",children:[(0,i.jsxs)("div",{className:"flex flex-none items-center justify-between gap-8",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("h4",{className:"text-2xl font-medium",children:"My Basket"}),(0,i.jsx)("p",{children:"(".concat(null!==(e=null==c?void 0:c.totalQuantity)&&void 0!==e?e:0," items)")})]}),(0,i.jsx)("div",{className:"flex items-center gap-4",children:(0,i.jsx)(B,{onClick:x,children:"Clear"})})]}),(0,i.jsx)("div",{className:"flex flex-1 flex-col gap-4 overflow-y-auto px-2",children:(null==c?void 0:c.products.length)?c.products.map(function(t){return(0,i.jsx)(Y,(0,m.Z)({},t),t.id)}):(0,i.jsx)("span",{className:"my-auto text-center text-2xl",children:"Your cart is empty"})})]})}),(0,i.jsx)(N.m,{borderTopWidth:"1px",children:(0,i.jsxs)("div",{className:"flex w-full justify-between justify-self-end py-4 px-4 md:px-8 md:py-6",children:[c&&(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("h6",{className:"font-medium",children:"Subtotal Amount:"}),(0,i.jsx)("span",{className:"text-2xl font-semibold",children:O(c.discountedTotal)})]}),(0,i.jsx)(H,{onClick:function(){return n({title:"We're sorry. This feature is not available yet.",description:"We're doing our best to implement it as soon as possible. Please check back later.",status:"info",duration:5e3,position:"top",isClosable:!0})},children:"Checkout"})]})})]})]})]})};function G(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l(),{children:[(0,i.jsx)("title",{children:"Artisan pottery"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)("h1",{className:"relative text-center text-5xl font-bold after:absolute after:left-0 after:-bottom-3 after:h-px after:w-full after:border-b-2 after:border-dashed after:border-teal-700 after:content-['']",children:"Cart components"}),(0,i.jsxs)("div",{className:"m-auto flex max-w-xl flex-col justify-center gap-6 p-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Add to Cart button"}),(0,i.jsx)(x,{productId:89,quantity:2})]}),(0,i.jsxs)("div",{className:"w-full border-4 border-dotted border-teal-700",children:[(0,i.jsx)("label",{children:"Add to Cart button (Web Component)"}),(0,i.jsx)("add-to-cart-btn",{"product-id":"1",quantity:"5"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Cart Drawer"}),(0,i.jsx)(V,{})]})]})]})}n(4473)}},function(t){t.O(0,[249,82,754,774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);