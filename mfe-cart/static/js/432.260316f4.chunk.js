"use strict";(self.webpackChunkcart=self.webpackChunkcart||[]).push([[432],{5432:function(t,e,n){n.r(e);var r=n(7313),a=n(1739),s=n(206),i=n(8483),c=n(6417),o=function(t){var e=t.productId,n=t.quantity,a=(0,r.useRef)(null),o=(0,r.useCallback)((function(){a.current.dispatchEvent(new CustomEvent("cart:item_added",{bubbles:!0,detail:{productId:Number(e),quantity:Number(null!==n&&void 0!==n?n:1)}}))}),[e,n]);return(0,c.jsx)(s.x,{children:(0,c.jsx)("div",{className:"w-full",ref:a,children:(0,c.jsx)(i.z,{colorScheme:"teal",size:"lg",width:"100%",onClick:o,children:"Add to Cart"})})})},l=n(1413),u=n(4549),d=n(6636),x=n(5819),f=n(8816),m=n(2498),p=n(1433),h=n(9346),v=n(9976),b=n(4451),j=n(5651),g=n(4052),w=function(t){return(0,c.jsx)("svg",(0,l.Z)((0,l.Z)({viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:(0,c.jsx)("path",{d:"M24.61 7.184L36.983 19.56c.188.188.321.39.4.61.077.218.116.453.116.703 0 .25-.039.484-.116.703a1.656 1.656 0 01-.4.61L24.61 34.558c-.343.344-.773.524-1.288.54a1.75 1.75 0 01-1.337-.54 1.755 1.755 0 01-.587-1.288 1.75 1.75 0 01.54-1.337l9.188-9.187H10.172c-.531 0-.977-.18-1.337-.538-.359-.36-.538-.806-.538-1.337 0-.532.18-.977.538-1.335.36-.36.806-.54 1.337-.54h20.953l-9.188-9.188c-.343-.344-.523-.781-.54-1.312-.014-.532.166-.97.54-1.313.344-.375.782-.562 1.313-.562.531 0 .984.187 1.36.562z"})}))},y=function(t){return(0,c.jsx)("svg",(0,l.Z)((0,l.Z)({viewBox:"0 0 41 42",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:(0,c.jsx)("path",{d:"M4.667 27.667v-23H.833V.833h5.75A1.917 1.917 0 018.5 2.75v23h23.84l3.833-15.333h-23.84V6.583H38.63a1.917 1.917 0 011.86 2.383l-4.793 19.167a1.917 1.917 0 01-1.859 1.45H6.583a1.917 1.917 0 01-1.916-1.916zM8.5 41.083a3.833 3.833 0 110-7.666 3.833 3.833 0 010 7.666zm23 0a3.834 3.834 0 110-7.667 3.834 3.834 0 010 7.667z"})}))},N=function(t){return(0,c.jsx)("svg",(0,l.Z)((0,l.Z)({viewBox:"0 0 27 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.187 7.247a1.016 1.016 0 00.001-1.433 1.013 1.013 0 00-1.433-.001l-6.112 6.112-6.11-6.112a1.014 1.014 0 10-1.435 1.434l6.112 6.11-6.112 6.11a1.015 1.015 0 001.434 1.435l6.11-6.112 6.113 6.112a1.013 1.013 0 101.432-1.435l-6.112-6.11 6.112-6.11z"})}))},k=n(3433),C=n(4165),Z=n(5861),q=n(9439),P=n(9888),T=n(7032),F=n(1459),Q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.pow(10,e);return Math.ceil(t*n)/n},S=function(t){t.total=t.quantity*t.price;var e=1-.01*t.discountPercentage;t.discountedPrice=Q(t.total*e)},z=function(t){t.total=t.products.reduce((function(t,e){return t+e.total}),0),t.discountedTotal=Q(t.products.reduce((function(t,e){return t+e.discountedPrice}),0)),t.totalProducts=t.products.length,t.totalQuantity=Q(t.products.reduce((function(t,e){return t+e.quantity}),0))},M=function(){var t=(0,g.NL)(),e=(0,F._)("cart",{id:1,userId:Math.floor(20*Math.random())+1,total:0,discountedTotal:0,totalProducts:0,totalQuantity:0,products:[]}),n=(0,q.Z)(e,2),a=n[0],s=n[1],i=(0,r.useCallback)((function(e){t.setQueryData(["cart"],(0,l.Z)({},e)),s(e)}),[s,t]),c=(0,P.a)({queryKey:["cart"],notifyOnChangeProps:["data"],queryFn:function(){var e=t.getQueryData(["cart"]);return!a||e&&e.products.length?e:a},staleTime:1/0}).data,o=(0,T.D)({mutationFn:function(){var t=(0,Z.Z)((0,C.Z)().mark((function t(e){var n,r,a,s,o;return(0,C.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.newProduct,r=e.quantity,c){t.next=3;break}return t.abrupt("return");case 3:(a=c.products.find((function(t){return t.id===n.id})))?(a.quantity+=r,S(a)):(s=1-n.discountPercentage/100,o=(0,l.Z)((0,l.Z)({},n),{},{quantity:r,total:n.price*r,discountedPrice:Q(n.price*r*s)}),c.products.push(o)),z(c),i(c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onSuccess:function(){return t.invalidateQueries(["cart"])}}),u=o.mutate,d=(0,T.D)({mutationFn:function(){var t=(0,Z.Z)((0,C.Z)().mark((function t(e){var n,r,a;return(0,C.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.productId,r=e.quantity,c){t.next=3;break}return t.abrupt("return");case 3:if(a=c.products.find((function(t){return t.id===n}))){t.next=6;break}return t.abrupt("return");case 6:0===r?c.products=c.products.filter((function(t){return t.id!==n})):(a.quantity=r,S(a)),z(c),i(c);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onSuccess:function(){return t.invalidateQueries(["cart"])}}),x=d.mutate,f=(0,T.D)({mutationFn:function(){var t=(0,Z.Z)((0,C.Z)().mark((function t(e){return(0,C.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return");case 2:if(c.products.map((function(t){return t.id})).includes(e)){t.next=4;break}return t.abrupt("return");case 4:c.products=(0,k.Z)(c.products.filter((function(t){return t.id!==e}))),z(c),i(c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onSuccess:function(){return t.invalidateQueries(["cart"])}}),m=f.mutate,p=(0,T.D)({mutationFn:function(){var t=(0,Z.Z)((0,C.Z)().mark((function t(){return(0,C.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return");case 2:c.products.length=0,z(c),i(c);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onSuccess:function(){return t.invalidateQueries(["cart"])}}),h=p.mutate;return(0,r.useMemo)((function(){return{cart:c,addToCart:u,updateProductQuantity:x,removeFromCart:m,clearCart:h}}),[u,c,h,m,x])},D=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},E="https://dummyjson.com",I=function(){var t=(0,Z.Z)((0,C.Z)().mark((function t(e){var n,r;return(0,C.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.url,t.next=3,fetch("".concat(E).concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if((r=t.sent).ok){t.next=6;break}return t.abrupt("return",[null,new Error("Api GET request error: ".concat(r.status," ").concat(r.statusText))]);case 6:return t.next=8,r.json();case 8:return t.t0=t.sent,t.abrupt("return",[t.t0,null]);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=(0,Z.Z)((0,C.Z)().mark((function t(e){var n,r,a,s,i;return(0,C.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.url,r=e.body,a=e.method,t.next=3,fetch("".concat(E).concat(n),{method:a,body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});case 3:if((s=t.sent).ok){t.next=6;break}return t.abrupt("return",[null,new Error("Api ".concat(a," request error: ").concat(s.status," ").concat(s.statusText))]);case 6:return t.next=8,s.json();case 8:return i=t.sent,t.abrupt("return",[i,null]);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),W={get:I,mutate:A},B=function(t){var e=t.children,n=t.onClick;return(0,c.jsx)("button",{onClick:n,className:"outline-amber rounded-sm bg-transparent px-3 py-1 text-amber-400 outline outline-2 transition-all duration-300 hover:bg-amber-400/20",children:e})},H=function(t){var e=t.children,n=t.onClick;return(0,c.jsxs)("button",{onClick:n,className:"group flex items-center gap-2 rounded-lg bg-amber-400 py-2 px-6 text-xl font-bold text-neutral-800 transition-all duration-300 hover:bg-neutral-800 hover:text-amber-500 md:text-2xl",children:[e,(0,c.jsx)("div",{className:"w-7",children:(0,c.jsx)(w,{className:"fill-neutral-800 transition-all duration-300 group-hover:fill-amber-500"})})]})},L=n(1843),_=function(t){var e=t.quantity,n=t.title,r=t.price,a=t.discountedPrice,s=t.discountPercentage,i=t.thumbnail,o=t.id,l=M(),u=l.updateProductQuantity,d=l.removeFromCart;return(0,c.jsxs)("div",{className:"flex min-h-[8rem] w-full items-center justify-between gap-6 rounded-lg p-4 shadow-md",children:[(0,c.jsx)("div",{className:"relative h-24 w-24 flex-none",children:(0,c.jsx)("img",{sizes:"(min-width: 768px) 15rem, 100vw",src:null!==i&&void 0!==i?i:"https://i.dummyjson.com/data/products/".concat(o,"/thumbnail.jpg"),className:"absolute left-0 top-0 right-0 bottom-0 h-full w-full rounded-lg border border-neutral-400/50 object-cover",alt:n})}),(0,c.jsxs)("div",{className:"flex flex-1 flex-col gap-1 text-center",children:[(0,c.jsx)("h6",{className:"flex-1 text-center text-lg font-medium",children:n}),(0,c.jsxs)("div",{className:"text-sm",children:["Price per unit:"," ",(0,c.jsx)("span",{className:"font-medium",children:D(r-r*s*.01)})]})]}),(0,c.jsxs)("div",{className:"flex flex-none items-center gap-6",children:[(0,c.jsxs)("div",{className:"flex flex-none items-center gap-2",children:[(0,c.jsxs)(L.Y2,{maxWidth:"20",defaultValue:e,min:0,max:10,onChange:function(t,e){return u({productId:o,quantity:e})},children:[(0,c.jsx)(L.zu,{}),(0,c.jsxs)(L.Fi,{children:[(0,c.jsx)(L.WQ,{}),(0,c.jsx)(L.Y_,{})]})]}),(0,c.jsx)("div",{className:"flex flex-col gap-1 text-center",children:(0,c.jsx)("p",{className:"text-xl",children:D(a)})})]}),(0,c.jsx)("button",{onClick:function(){return d(o)},className:"flex h-7 w-7 flex-none rounded-sm bg-slate-400 transition-all duration-300 hover:bg-amber-500",children:(0,c.jsx)(N,{className:"fill-slate-50 transition-all duration-300"})})]})]})},O=new j.S,R=function(){var t,e,n=(0,u.p)(),a=(0,d.q)(),s=a.isOpen,i=a.onToggle,o=a.onClose,j=M(),g=j.cart,w=j.clearCart,N=j.addToCart,k=(0,r.useCallback)((function(){w()}),[w]),C=(0,r.useCallback)((function(t){t.detail.productId&&W.get({url:"/products/".concat(t.detail.productId)}).then((function(t){return t[0]})).then((function(e){var n;e&&N({newProduct:e,quantity:null!==(n=t.detail.quantity)&&void 0!==n?n:1})}))}),[N]);return(0,r.useEffect)((function(){return window.addEventListener("cart:item_added",C),function(){window.removeEventListener("cart:item_added",C)}}),[C]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"relative h-7 w-7",children:[(0,c.jsx)("button",{disabled:!g,onClick:i,children:(0,c.jsx)("div",{className:"h-7 w-7",children:(0,c.jsx)(y,{className:"fill-amber-500 transition-all duration-300 hover:fill-amber-400"})})}),(0,c.jsx)("span",{className:"items absolute -bottom-2 -right-3 box-content flex h-5 w-5 items-center justify-center rounded-full border-2 border-amber-500 bg-slate-50 text-slate-900",children:(0,c.jsx)("span",{className:"text-xs transition-all duration-300",children:null!==(t=null===g||void 0===g?void 0:g.totalQuantity)&&void 0!==t?t:0})})]}),(0,c.jsxs)(x.d,{isOpen:s,placement:"right",size:"lg",onClose:o,children:[(0,c.jsx)(f.Z,{}),(0,c.jsxs)(m.s,{children:[(0,c.jsx)(p.x,{fontSize:"xx-large",children:"Your shopping cart"}),(0,c.jsx)(h.o,{}),(0,c.jsx)(v.f,{children:(0,c.jsxs)("div",{className:"flex h-full flex-col gap-6",children:[(0,c.jsxs)("div",{className:"flex flex-none items-center justify-between gap-8",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("h4",{className:"text-2xl font-medium",children:"My Basket"}),(0,c.jsx)("p",{children:"(".concat(null!==(e=null===g||void 0===g?void 0:g.totalQuantity)&&void 0!==e?e:0," items)")})]}),(0,c.jsx)("div",{className:"flex items-center gap-4",children:(0,c.jsx)(B,{onClick:k,children:"Clear"})})]}),(0,c.jsx)("div",{className:"flex flex-1 flex-col gap-4 overflow-y-auto px-2",children:null!==g&&void 0!==g&&g.products.length?g.products.map((function(t){return(0,c.jsx)(_,(0,l.Z)({},t),t.id)})):(0,c.jsx)("span",{className:"my-auto text-center text-2xl",children:"Your cart is empty"})})]})}),(0,c.jsx)(b.m,{borderTopWidth:"1px",children:(0,c.jsxs)("div",{className:"flex w-full justify-between justify-self-end py-4 px-4 md:px-8 md:py-6",children:[g&&(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,c.jsx)("h6",{className:"font-medium",children:"Subtotal Amount:"}),(0,c.jsx)("span",{className:"text-2xl font-semibold",children:D(g.discountedTotal)})]}),(0,c.jsx)(H,{onClick:function(){return n({title:"We're sorry. This feature is not available yet.",description:"We're doing our best to implement it as soon as possible. Please check back later.",status:"info",duration:5e3,position:"top",isClosable:!0})},children:"Checkout"})]})})]})]})]})},Y=function(){return(0,c.jsx)(g.aH,{client:O,children:(0,c.jsx)(s.x,{children:(0,c.jsx)(R,{})})})};var V=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h1",{className:"relative text-center text-5xl font-bold after:absolute after:left-0 after:-bottom-3 after:h-px after:w-full after:border-b-2 after:border-dashed after:border-teal-700 after:content-['']",children:"Cart components"}),(0,c.jsxs)("div",{className:"m-auto flex max-w-xl flex-col justify-center gap-6 p-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"Add to Cart button"}),(0,c.jsx)(o,{productId:89,quantity:2})]}),(0,c.jsxs)("div",{className:"w-full border-4 border-dotted border-teal-700",children:[(0,c.jsx)("label",{children:"Add to Cart button (Web Component)"}),(0,c.jsx)("add-to-cart-btn",{"product-id":"1",quantity:"5"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"Cart Drawer"}),(0,c.jsx)(Y,{})]})]})]})};a.createRoot(document.getElementById("root")).render((0,c.jsx)(r.StrictMode,{children:(0,c.jsx)(V,{})}))}}]);