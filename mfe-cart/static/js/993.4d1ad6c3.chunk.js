"use strict";(self.webpackChunkcart=self.webpackChunkcart||[]).push([[993],{48993:function(e,t,n){n.r(t);var r=n(72791),a=n(1250),i=n(1413),s=n(91295),c=n(91538),l=n(42338),o=n(9077),u=n(25815),d=n(7693),x=n(61461),f=n(37521),m=n(64653),p=n(21650),h=n(14155),v=n(96403),j=n(80184),b=function(e){return(0,j.jsx)("svg",(0,i.Z)((0,i.Z)({viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,j.jsx)("path",{d:"M24.61 7.184L36.983 19.56c.188.188.321.39.4.61.077.218.116.453.116.703 0 .25-.039.484-.116.703a1.656 1.656 0 01-.4.61L24.61 34.558c-.343.344-.773.524-1.288.54a1.75 1.75 0 01-1.337-.54 1.755 1.755 0 01-.587-1.288 1.75 1.75 0 01.54-1.337l9.188-9.187H10.172c-.531 0-.977-.18-1.337-.538-.359-.36-.538-.806-.538-1.337 0-.532.18-.977.538-1.335.36-.36.806-.54 1.337-.54h20.953l-9.188-9.188c-.343-.344-.523-.781-.54-1.312-.014-.532.166-.97.54-1.313.344-.375.782-.562 1.313-.562.531 0 .984.187 1.36.562z"})}))},g=function(e){return(0,j.jsx)("svg",(0,i.Z)((0,i.Z)({viewBox:"0 0 41 42",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,j.jsx)("path",{d:"M4.667 27.667v-23H.833V.833h5.75A1.917 1.917 0 018.5 2.75v23h23.84l3.833-15.333h-23.84V6.583H38.63a1.917 1.917 0 011.86 2.383l-4.793 19.167a1.917 1.917 0 01-1.859 1.45H6.583a1.917 1.917 0 01-1.916-1.916zM8.5 41.083a3.833 3.833 0 110-7.666 3.833 3.833 0 010 7.666zm23 0a3.834 3.834 0 110-7.667 3.834 3.834 0 010 7.667z"})}))},w=function(e){return(0,j.jsx)("svg",(0,i.Z)((0,i.Z)({viewBox:"0 0 27 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.187 7.247a1.016 1.016 0 00.001-1.433 1.013 1.013 0 00-1.433-.001l-6.112 6.112-6.11-6.112a1.014 1.014 0 10-1.435 1.434l6.112 6.11-6.112 6.11a1.015 1.015 0 001.434 1.435l6.11-6.112 6.113 6.112a1.013 1.013 0 101.432-1.435l-6.112-6.11 6.112-6.11z"})}))},y=n(89062),N=n(74165),k=n(15861),Z=n(93324),C=n(85439),P=n(39208),Q=n(53080),q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.pow(10,t);return Math.ceil(e*n)/n},F=function(e){e.total=e.quantity*e.price;var t=1-.01*e.discountPercentage;e.discountedPrice=q(e.total*t)},M=function(e){e.total=e.products.reduce((function(e,t){return e+t.total}),0),e.discountedTotal=q(e.products.reduce((function(e,t){return e+t.discountedPrice}),0)),e.totalProducts=e.products.length,e.totalQuantity=q(e.products.reduce((function(e,t){return e+t.quantity}),0))},S=function(){var e=(0,v.NL)(),t=(0,Q._)("cart",{id:1,userId:Math.floor(20*Math.random())+1,total:0,discountedTotal:0,totalProducts:0,totalQuantity:0,products:[]}),n=(0,Z.Z)(t,2),a=n[0],s=n[1],c=(0,r.useCallback)((function(t){e.setQueryData(["cart"],(0,i.Z)({},t)),s(t)}),[s,e]),l=(0,C.a)({queryKey:["cart"],notifyOnChangeProps:["data"],queryFn:function(){var t=e.getQueryData(["cart"]);return!a||t&&t.products.length?t:a},staleTime:1/0}).data,o=(0,P.D)({mutationFn:function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t){var n,r,a,s,o;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.newProduct,r=t.quantity,l){e.next=3;break}return e.abrupt("return");case 3:(a=l.products.find((function(e){return e.id===n.id})))?(a.quantity+=r,F(a)):(s=1-n.discountPercentage/100,o=(0,i.Z)((0,i.Z)({},n),{},{quantity:r,total:n.price*r,discountedPrice:q(n.price*r*s)}),l.products.push(o)),M(l),c(l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(){return e.invalidateQueries(["cart"])}}),u=o.mutate,d=(0,P.D)({mutationFn:function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t){var n,r,a;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.productId,r=t.quantity,l){e.next=3;break}return e.abrupt("return");case 3:if(a=l.products.find((function(e){return e.id===n}))){e.next=6;break}return e.abrupt("return");case 6:0===r?l.products=l.products.filter((function(e){return e.id!==n})):(a.quantity=r,F(a)),M(l),c(l);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(){return e.invalidateQueries(["cart"])}}),x=d.mutate,f=(0,P.D)({mutationFn:function(){var e=(0,k.Z)((0,N.Z)().mark((function e(t){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:if(l.products.map((function(e){return e.id})).includes(t)){e.next=4;break}return e.abrupt("return");case 4:l.products=(0,y.Z)(l.products.filter((function(e){return e.id!==t}))),M(l),c(l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(){return e.invalidateQueries(["cart"])}}),m=f.mutate,p=(0,P.D)({mutationFn:function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:l.products.length=0,M(l),c(l);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSuccess:function(){return e.invalidateQueries(["cart"])}}),h=p.mutate;return(0,r.useMemo)((function(){return{cart:l,addToCart:u,updateProductQuantity:x,removeFromCart:m,clearCart:h}}),[u,l,h,m,x])},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},D=function(e){var t=e.children,n=e.onClick;return(0,j.jsx)("button",{onClick:n,className:"outline-amber rounded-sm bg-transparent px-3 py-1 text-amber-400 outline outline-2 transition-all duration-300 hover:bg-amber-400/20",children:t})},T=function(e){var t=e.children,n=e.onClick;return(0,j.jsxs)("button",{onClick:n,className:"group flex items-center gap-2 rounded-lg bg-amber-400 py-2 px-6 text-xl font-bold text-neutral-800 transition-all duration-300 hover:bg-neutral-800 hover:text-amber-500 md:text-2xl",children:[t,(0,j.jsx)("div",{className:"w-7",children:(0,j.jsx)(b,{className:"fill-neutral-800 transition-all duration-300 group-hover:fill-amber-500"})})]})},B=n(26183),H=function(e){var t=e.quantity,n=e.title,r=e.price,a=e.discountedPrice,i=e.discountPercentage,s=e.thumbnail,c=e.id,l=S(),o=l.updateProductQuantity,u=l.removeFromCart;return(0,j.jsxs)("div",{className:"flex min-h-[8rem] w-full items-center justify-between gap-6 rounded-lg p-4 shadow-md",children:[(0,j.jsx)("div",{className:"relative h-24 w-24 flex-none",children:(0,j.jsx)("img",{sizes:"(min-width: 768px) 15rem, 100vw",src:null!==s&&void 0!==s?s:"https://i.dummyjson.com/data/products/".concat(c,"/thumbnail.jpg"),className:"absolute left-0 top-0 right-0 bottom-0 h-full w-full rounded-lg border border-neutral-400/50 object-cover",alt:n})}),(0,j.jsxs)("div",{className:"flex flex-1 flex-col gap-1 text-center",children:[(0,j.jsx)("h6",{className:"flex-1 text-center text-lg font-medium",children:n}),(0,j.jsxs)("div",{className:"text-sm",children:["Price per unit:"," ",(0,j.jsx)("span",{className:"font-medium",children:z(r-r*i*.01)})]})]}),(0,j.jsxs)("div",{className:"flex flex-none items-center gap-6",children:[(0,j.jsxs)("div",{className:"flex flex-none items-center gap-2",children:[(0,j.jsxs)(B.Y2,{maxWidth:"20",defaultValue:t,min:0,max:10,onChange:function(e,t){return o({productId:c,quantity:t})},children:[(0,j.jsx)(B.zu,{}),(0,j.jsxs)(B.Fi,{children:[(0,j.jsx)(B.WQ,{}),(0,j.jsx)(B.Y_,{})]})]}),(0,j.jsx)("div",{className:"flex flex-col gap-1 text-center",children:(0,j.jsx)("p",{className:"text-xl",children:z(a)})})]}),(0,j.jsx)("button",{onClick:function(){return u(c)},className:"flex h-7 w-7 flex-none rounded-sm bg-slate-400 transition-all duration-300 hover:bg-amber-500",children:(0,j.jsx)(w,{className:"fill-slate-50 transition-all duration-300"})})]})]})},I=new h.S,L=function(){var e,t,n=(0,s.p)(),a=(0,c.q)(),p=a.isOpen,h=a.onToggle,v=a.onClose,b=S(),w=b.cart,y=b.clearCart,N=(0,r.useCallback)((function(){y()}),[y]);return(0,r.useEffect)((function(){var e=function(e){console.log(e)};return window.addEventListener("cart:item_added",e),function(){window.removeEventListener("cart:item_added",e)}}),[]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"relative h-7 w-7",children:[(0,j.jsx)("button",{disabled:!w,onClick:h,children:(0,j.jsx)("div",{className:"h-7 w-7",children:(0,j.jsx)(g,{className:"fill-amber-500 transition-all duration-300 hover:fill-amber-400"})})}),(0,j.jsx)("span",{className:"items absolute -bottom-2 -right-3 box-content flex h-5 w-5 items-center justify-center rounded-full border-2 border-amber-500 bg-slate-50 text-slate-900",children:(0,j.jsx)("span",{className:"text-xs transition-all duration-300",children:null!==(e=null===w||void 0===w?void 0:w.totalQuantity)&&void 0!==e?e:0})})]}),(0,j.jsxs)(l.d,{isOpen:p,placement:"right",size:"lg",onClose:v,children:[(0,j.jsx)(o.Z,{}),(0,j.jsxs)(u.s,{children:[(0,j.jsx)(d.x,{fontSize:"xx-large",children:"Your shopping cart"}),(0,j.jsx)(x.o,{}),(0,j.jsx)(f.f,{children:(0,j.jsxs)("div",{className:"flex h-full flex-col gap-6",children:[(0,j.jsxs)("div",{className:"flex flex-none items-center justify-between gap-8",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("h4",{className:"text-2xl font-medium",children:"My Basket"}),(0,j.jsx)("p",{children:"(".concat(null!==(t=null===w||void 0===w?void 0:w.totalQuantity)&&void 0!==t?t:0," items)")})]}),(0,j.jsx)("div",{className:"flex items-center gap-4",children:(0,j.jsx)(D,{onClick:N,children:"Clear"})})]}),(0,j.jsx)("div",{className:"flex flex-1 flex-col gap-4 overflow-y-auto px-2",children:null!==w&&void 0!==w&&w.products.length?w.products.map((function(e){return(0,j.jsx)(H,(0,i.Z)({},e),e.id)})):(0,j.jsx)("span",{className:"my-auto text-center text-2xl",children:"Your cart is empty"})})]})}),(0,j.jsx)(m.m,{borderTopWidth:"1px",children:(0,j.jsxs)("div",{className:"flex w-full justify-between justify-self-end py-4 px-4 md:px-8 md:py-6",children:[w&&(0,j.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,j.jsx)("h6",{className:"font-medium",children:"Subtotal Amount:"}),(0,j.jsx)("span",{className:"text-2xl font-semibold",children:z(w.discountedTotal)})]}),(0,j.jsx)(T,{onClick:function(){return n({title:"We're sorry. This feature is not available yet.",description:"We're doing our best to implement it as soon as possible. Please check back later.",status:"info",duration:5e3,position:"top",isClosable:!0})},children:"Checkout"})]})})]})]})]})},W=function(){return(0,j.jsx)(v.aH,{client:I,children:(0,j.jsx)(p.x,{children:(0,j.jsx)(L,{})})})};a.createRoot(document.getElementById("root")).render((0,j.jsx)(r.StrictMode,{children:(0,j.jsx)(W,{})}))}}]);
//# sourceMappingURL=993.4d1ad6c3.chunk.js.map